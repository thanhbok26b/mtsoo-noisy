from tqdm import trange
from mtsoo_noisy import *
from scipy.stats import spearmanr

def main(taskset):
    Y1 = []
    Y2 = []

    iterator = trange(1000000)
    for i in iterator:
        x  = np.random.rand(taskset.dim)
        Y1.append(taskset.f1(x))
        Y2.append(taskset.f2(x))
        if (i + 1) % 100000 == 0 and i > 0:
            p, r = spearmanr(Y1, Y2)
            iterator.set_description('%s,i=%d,p=%0.2f,r=%0.6f' % (type(taskset).__name__, i, p, r))

if __name__ == '__main__':
    main(CI_HS())
    main(CI_MS())
    main(CI_LS())
    main(NI_HS())
    main(NI_MS())
#root@kali:~/Desktop/mtsoo-noisy# python3 calculate_spearman_correlation.py 
#CI_HS,i=999999,p=0.59,r=0: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [01:05<00:00, 15235.55it/s]
#CI_MS,i=999999,p=0.01,r=0: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [00:52<00:00, 19199.94it/s]
#CI_LS,i=999999,p=-0.00,r=0: 100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [00:49<00:00, 20262.40it/s]
#NI_HS,i=999999,p=0.64,r=0: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [00:39<00:00, 25067.33it/s]
#NI_MS,i=999999,p=0.14,r=0: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [02:56<00:00, 5657.43it/s]
