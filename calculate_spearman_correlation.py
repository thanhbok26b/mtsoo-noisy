from tqdm import trange
from mtsoo_noisy import *
from scipy.stats import spearmanr

def main(taskset):
    Y1 = []
    Y2 = []

    iterator = trange(1000000)
    for i in iterator:
        x  = np.random.rand(taskset.dim)
        Y1.append(taskset.f1(x))
        Y2.append(taskset.f2(x))
        if (i + 1) % 100000 == 0 and i > 0:
            p, r = spearmanr(Y1, Y2)
            iterator.set_description('%s,i=%d,p=%0.2f,r=%0.6f' % (type(taskset).__name__, i, p, r))

if __name__ == '__main__':
    main(CI_HS())
    main(CI_MS())
    main(CI_LS())
    main(NI_HS())
    main(NI_MS())
#CI_HS,i=999999,p=0.59,r=0.000000: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [01:00<00:00, 16648.64it/s]
#CI_MS,i=999999,p=0.01,r=0.000000: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [00:47<00:00, 21053.43it/s]
#CI_LS,i=999999,p=-0.00,r=0.260000: 100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [00:43<00:00, 22807.03it/s]
#NI_HS,i=999999,p=0.64,r=0.000000: 100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [00:36<00:00, 27363.37it/s]
#NI_MS,i=999999,p=0.14,r=0.000000: 100%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 1000000/1000000 [02:45<00:00, 6024.21it/s]
